(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={overlay:"Modal_overlay__pqzFn",modal:"Modal_modal__3kZA4"}},12:function(e,t,a){e.exports={item:"ImageGalleryItem_item__2G8qg",image:"ImageGalleryItem_image__1_-kz"}},14:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__1GM1M"}},16:function(e,t,a){e.exports={LoaderWrap:"UserLoader_LoaderWrap__3vCiV"}},17:function(e,t,a){e.exports={button:"Button_button__2fXHK"}},22:function(e,t,a){},24:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(4),o=a.n(r),s=(a(22),a(3)),i=a(9),u=(a(23),a(24),a(6)),l=a.n(u),m=a(1),j=function(e){var t=e.onSubmit,a=Object(c.useState)(""),n=Object(s.a)(a,2),r=n[0],o=n[1];return Object(m.jsx)("header",{className:l.a.searchbar,children:Object(m.jsxs)("form",{className:l.a.searchForm,onSubmit:function(e){e.preventDefault(),r||i.b.info("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441"),t(r.trim()),o("")},children:[Object(m.jsx)("button",{type:"submit",className:l.a.searchFormButton,children:Object(m.jsx)("span",{className:l.a.searchFormButtonLabel,children:"Search"})}),Object(m.jsx)("input",{className:l.a.searchFormInput,type:"text",value:r,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})})};j.defaultProps={onSubmit:function(){}};var b=j,d=a(13),f=(a(26),a(5)),h=a.n(f),g=a(2),p=a.n(g),O=a(14),x=a.n(O),_=a(12),v=a.n(_);function E(e){var t=e.src,a=e.alt,c=e.index,n=e.onClick;return Object(m.jsx)("li",{className:v.a.item,onClick:function(){return n(c)},children:Object(m.jsx)("img",{src:t,alt:a,className:v.a.image})})}function S(e){var t=e.images,a=e.onClick;return Object(m.jsx)("ul",{className:x.a.gallery,children:t.map((function(e,t){return Object(m.jsx)(E,{src:e.webformatURL,alt:e.tags,index:t,onClick:a},e.id)}))})}E.prototype={src:p.a.string.isRequired,alt:p.a.string.isRequired,index:p.a.number.isRequired,onClick:p.a.func.isRequired},E.defaultProps={src:"./",alt:"image",index:0,onClick:function(){}},S.prototype={images:p.a.array.isRequired,onClick:p.a.func.isRequired},S.defaultProps={images:[],onClick:function(){}};var y=a(15),C=a.n(y),k=a(16),N=a.n(k),I=function(){return Object(m.jsx)("div",{className:N.a.LoaderWrap,children:Object(m.jsx)(C.a,{type:"Puff",color:"#3f51b5",height:200,width:200,timeout:3e3})})};var w={fetchImages:function(e,t){return fetch("".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=").concat("22993210-edd192b19fd9d2ee0b0d8e9c4","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()})).then((function(e){return{images:e.hits,totalHits:e.totalHits}}))}},L=a.p+"static/media/error.a4faafb6.jpg";function F(e){var t=e.message;return Object(m.jsxs)("div",{role:"alert",className:h.a.wrap,children:[Object(m.jsx)("img",{className:h.a.image,src:L,width:"300",alt:"error"}),Object(m.jsx)("p",{className:h.a.text,children:t})]})}F.defaultProps={message:"\u041f\u043e \u0412\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"};var R={IDLE:"idle",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"},q=a(17),D=a.n(q),P=function(e){var t=e.onClick;return Object(m.jsx)("button",{className:D.a.button,type:"button",onClick:t,children:"Load more..."})};P.defaultProps={onClick:function(){}};var M=P,T=a(10),B=a.n(T),G=document.querySelector("#modal-root"),V=function(e){var t=e.closeModal,a=e.image;Object(c.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]);return Object(r.createPortal)(Object(m.jsx)("div",{className:B.a.overlay,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(m.jsx)("div",{className:B.a.modal,children:Object(m.jsx)("img",{className:B.a.image,src:a.largeImageURL,alt:a.tags})})}),G)};V.defaultProps={closeModal:function(){},image:null};var H=V,J=function(e){var t=e.queryValue,a=e.page,n=Object(c.useState)(null),r=Object(s.a)(n,2),o=r[0],i=r[1],u=Object(c.useState)(a),l=Object(s.a)(u,2),j=l[0],b=l[1],f=Object(c.useState)(!1),g=Object(s.a)(f,2),p=g[0],O=g[1],x=Object(c.useState)(void 0),_=Object(s.a)(x,2),v=_[0],E=_[1],y=Object(c.useState)(R.IDLE),C=Object(s.a)(y,2),k=C[0],N=C[1],L=Object(c.useState)(0),q=Object(s.a)(L,2),D=q[0],P=q[1],T=Object(c.useState)(null),B=Object(s.a)(T,2),G=B[0],V=B[1],J=Object(c.useState)(),U=Object(s.a)(J,2),z=(U[0],U[1]);Object(c.useEffect)((function(){t&&(console.log("queryValue",t),N(R.PENDING),P(0),setTimeout((function(){w.fetchImages(t,j).then((function(e){var t=e.images,a=e.totalHits;i(t);var c=t.length>0?R.RESOLVED:R.REJECTED;N(c),V(a)})).catch((function(e){N(R.REJECTED),z(e)}))}),500))}),[t]),Object(c.useEffect)((function(){j>1&&window.scrollTo({top:D,behavior:"smooth"})}),[j]);return"idle"===k?Object(m.jsx)("p",{className:h.a.text,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441"}):"pending"===k?Object(m.jsx)(I,{}):"rejected"===k?Object(m.jsx)(F,{}):"resolved"===k?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(S,{images:o,onClick:function(e){E(e),O(!0)}}),o.length>0&&j!==Math.ceil(G/12)&&Object(m.jsx)(M,{onClick:function(){var e=document.documentElement.scrollHeight-150;w.fetchImages(t,j+1).then((function(t){var a=t.images;i([].concat(Object(d.a)(o),Object(d.a)(a))),N(R.RESOLVED),P(e),b(j+1)})).catch((function(e){z(e),N(R.REJECTED)}))}}),p&&Object(m.jsx)(H,{closeModal:function(){return O(!1)},image:o[v]})]}):void 0},U=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(b,{onSubmit:function(e){return n(e)}}),Object(m.jsx)(J,{queryValue:a,page:1}),Object(m.jsx)(i.a,{autoClose:2e3})]})};o.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(U,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={wrap:"ImageStateCar_wrap__3UZoe",text:"ImageStateCar_text__13Oi5",image:"ImageStateCar_image__3LYH8"}},6:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__1iq9X",searchForm:"Searchbar_searchForm__2x5TN",searchFormButton:"Searchbar_searchFormButton__2hlmV",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__1pd2P",searchFormInput:"Searchbar_searchFormInput__12EaG"}}},[[47,1,2]]]);
//# sourceMappingURL=main.623a94ba.chunk.js.map